@use "sass:map";

:root {
	--h1-line-height: 1px;
}

body {

	@for $i from 1 through 6 {
		--h#{$i}-size: var(--font-text-size);
		--h#{$i}-weight: 600;
		--h#{$i}-color: hsl(199, 100%, 49%);
		--h#{$i}-line-height: var(--font-text-size);
	}

	--line-height-normal: 1.3;
	--line-height-tight: 1.2;
	--p-spacing: var(--font-text-size);

	--hr-color: var(--color-base-30);
	--hr-thickness: 2px;

	--link-decoration: none;
	--link-decoration-hover: none;
	--link-external-decoration: none;
	--link-external-decoration-hover: none;
}

.theme-dark {

	--background-primary: #1e2124;
	--background-secondary: #1e2124;

}

// Display hash characters (#) before headers
// BUG: The collapse icon gets misplaced in the reading mode
$markers: (
	2: "## ",
	3: "### ",
	4: "#### ",
	5: "##### ",
	6: "###### "
);

@mixin header-marker($level) {
	content: map.get($markers, $level);
	font-size: calc(var(--h#{$level}-size) * var(--hh-marker-size));
	margin-left: var(--hh-gutter-margin);
	color: var(--color-base-50);
}

@for $i from 2 through 6 {

	h#{$i}::before,
	.is-live-preview .HyperMD-header-#{$i}:not(.cm-active)::before {
		@include header-marker($i);
	}
}

@for $i from 1 through 6 {
	h#{$i} {
		letter-spacing: 0;
	}
}

// Horisontal rule
hr {
	margin: calc(var(--font-text-size) * 2) 0;
}


// Removes the external link icon
.external-link {
	background-image: none;
	padding-right: 0px;
}

// Blocky links
a.internal-link,
a.external-link,
a.cm-underline {
	display: inline;
	position: relative;
	text-decoration: none;
	transition: all .3s cubic-bezier(.2, 0, 0, 1) !important;
	z-index: 1;
	line-height: 1.5;

	/* Underline effect using box-shadow */
	box-shadow: inset 0 -1px 0 currentColor;

	&:hover {
		color: white !important;
		box-shadow: inset 0 -24px 0 var(--link-external-color);
	}
}

// Icons before external links
.external-link::before {
	display: inline-block;
	padding-left: 2px;
	padding-right: 8px;
	// vertical-align: -2px;
	height: 16px;
	width: 16px;
	font-size: 14px;
	padding-top: 2px;
}

$domain-icons: (
	"http": "",
	"wikipedia.": "󰖬",
	"youtube.": "",
	"vk.": ""
);

@mixin external-link-icons {
	@each $domain, $icon in $domain-icons {
		.external-link[href*="#{$domain}"]::before {
			content: $icon;
		}
	}
}

@include external-link-icons;
